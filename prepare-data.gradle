import org.lenskit.gradle.*

task crossfoldML100K(type: Crossfold, group: 'crossfold') {
    dependsOn fetchML100K
    outputDir "$buildDir/crossfold/ml-100k"

    input textFile {
        file 'data/ml-100k/u.data'
        delimiter '\t'
        domain {
            minimum 1.0
            maximum 5.0
            precision 1.0
        }
    }
    holdout 5
    partitionCount 5
    outputFormat 'PACK'
}

task crossfoldMLLatestSmall(type: Crossfold, group: 'crossfold') {
    dependsOn fetchMLLatestSmall
    outputDir "$buildDir/crossfold/ml-latest-small"

    input textFile {
        file 'data/ml-latest-small/ratings.csv'
        delimiter ','
        headerLines 1
        domain {
            minimum 0.5
            maximum 5.0
            precision 0.5
        }
    }
    holdout 5
    partitionCount 5
    outputFormat 'PACK'
}
